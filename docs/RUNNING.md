# ğŸš€ ChatGPT Line Bot é‹è¡ŒæŒ‡å—

æœ¬æŒ‡å—ä»‹ç´¹å¦‚ä½•åœ¨ä¸åŒç’°å¢ƒä¸­é‹è¡Œ ChatGPT Line Botï¼Œç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„æœå‹™å™¨é…ç½®ã€‚

## ğŸŒŸ æ”¯æ´çš„å¹³å°å’Œ AI æ¨¡å‹

### ğŸ“± æ”¯æ´çš„èŠå¤©å¹³å°
- **LINE Bot** - ä¸»è¦æ”¯æ´å¹³å°ï¼Œå®Œæ•´åŠŸèƒ½
- **Discord Bot** - ç¾¤çµ„èŠå¤©å’ŒæŒ‡ä»¤åŠŸèƒ½
- **Telegram Bot** - è±å¯Œäº’å‹•å’Œæª”æ¡ˆå‚³è¼¸
- **Slack Bot** - ä¼æ¥­ç´šèŠå¤©æ©Ÿå™¨äºº
- **WhatsApp Bot** - ä¼æ¥­ç´šå®¢æœï¼Œæ”¯æ´åª’é«”è¨Šæ¯
- **Messenger Bot** - Facebook é é¢èŠå¤©æ©Ÿå™¨äººï¼Œæ”¯æ´è±å¯Œäº’å‹•
- **Instagram Bot** - Instagram å•†æ¥­å¸³è™ŸèŠå¤©æ©Ÿå™¨äººï¼Œæ”¯æ´ Story å›è¦†

### ğŸ¤– æ”¯æ´çš„ AI æ¨¡å‹
- **OpenAI GPT** - GPT-4 ç³»åˆ—ï¼ŒAssistant API
- **Anthropic Claude** - Claude 3.5 Sonnetï¼Œå®‰å…¨å°è©±
- **Google Gemini** - Gemini 1.5 Proï¼Œå¤šæ¨¡æ…‹èƒ½åŠ›
- **Hugging Face** - é–‹æºæ¨¡å‹ï¼ŒåŒ…å« Llama 4ã€Mistral ç­‰
- **Ollama** - æœ¬åœ°éƒ¨ç½²ï¼Œå®Œå…¨ç§æœ‰

è©³ç´°é…ç½®è«‹åƒè€ƒï¼š[é…ç½®æŒ‡å—](CONFIGURATION.md)

## ğŸŒŸ WhatsApp å¹³å°åŠŸèƒ½

### ğŸ“± WhatsApp Business Cloud API
WhatsApp å¹³å°ä½¿ç”¨ Meta å®˜æ–¹çš„ WhatsApp Business Cloud APIï¼Œæä¾›ä¼æ¥­ç´šçš„å³æ™‚é€šè¨Šæœå‹™ã€‚

#### æ”¯æ´åŠŸèƒ½
- âœ… **æ–‡å­—è¨Šæ¯**: å®Œæ•´çš„æ–‡å­—å…§å®¹æ¥æ”¶å’Œç™¼é€
- âœ… **éŸ³è¨Šè¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰å’Œè½‰éŒ„ç‚ºæ–‡å­—
- âœ… **åœ–ç‰‡è¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰åœ–ç‰‡æª”æ¡ˆ
- âœ… **æ–‡ä»¶è¨Šæ¯**: æ”¯æ´ PDFã€DOCã€XLSX ç­‰æ ¼å¼
- âœ… **ä½ç½®è¨Šæ¯**: ç¶“ç·¯åº¦åº§æ¨™å’Œåœ°å€è³‡è¨Š
- âœ… **è¯çµ¡äººè¨Šæ¯**: è¯çµ¡äººå¡ç‰‡è³‡è¨Š
- âœ… **ç°½åé©—è­‰**: HMAC-SHA256 webhook å®‰å…¨é©—è­‰

#### æŠ€è¡“ç‰¹è‰²
- **å®˜æ–¹ API**: ä½¿ç”¨ Meta å®˜æ–¹ WhatsApp Business Cloud API
- **çµ±ä¸€ä»‹é¢**: èˆ‡å…¶ä»–å¹³å°ä½¿ç”¨ç›¸åŒçš„èŠå¤©æœå‹™
- **åª’é«”è™•ç†**: è‡ªå‹•åª’é«”æª”æ¡ˆä¸‹è¼‰å’Œè™•ç†
- **å®‰å…¨æ€§**: å®Œæ•´çš„ç°½åé©—è­‰å’ŒéŒ¯èª¤è™•ç†

#### ç”³è«‹è¦æ±‚
- Meta Business Account é©—è­‰
- WhatsApp Business API å¯©æ ¸ï¼ˆ1-4é€±ï¼‰
- å•†æ¥­è­‰æ˜æ–‡ä»¶
- é›»è©±è™Ÿç¢¼é©—è­‰

#### é™åˆ¶èªªæ˜
- **24å°æ™‚çª—å£**: åªèƒ½å›è¦†ç”¨æˆ¶ä¸»å‹•ç™¼é€çš„è¨Šæ¯
- **æ¨¡æ¿è¨Šæ¯**: ç‡ŸéŠ·è¨Šæ¯éœ€è¦ä½¿ç”¨é å…ˆå¯©æ ¸çš„æ¨¡æ¿
- **è²»ç”¨è¨ˆç®—**: ä¾æ“šè¨Šæ¯é‡å’Œåœ°å€è¨ˆè²»
- **ç¾¤çµ„é™åˆ¶**: ä¸æ”¯æ´ç¾¤çµ„è¨Šæ¯ç™¼é€

### ğŸ”§ WhatsApp è¨­å®š
```yaml
platforms:
  whatsapp:
    enabled: true
    access_token: "${WHATSAPP_ACCESS_TOKEN}"
    phone_number_id: "${WHATSAPP_PHONE_NUMBER_ID}"
    app_secret: "${WHATSAPP_APP_SECRET}"
    verify_token: "${WHATSAPP_VERIFY_TOKEN}"
    api_version: "v13.0"
```

### ğŸ“ Webhook è¨­å®š
- **Webhook URL**: `https://your-domain.com/webhooks/whatsapp`
- **é©—è­‰æ–¹å¼**: GET è«‹æ±‚èˆ‡ verify_token é©—è­‰
- **æ¥æ”¶æ–¹å¼**: POST è«‹æ±‚åŒ…å«è¨Šæ¯è³‡æ–™
- **ç°½åé©—è­‰**: ä½¿ç”¨ App Secret é€²è¡Œ HMAC-SHA256 é©—è­‰

### ğŸ§ª æ¸¬è©¦å‘½ä»¤
```bash
# åŸ·è¡Œ WhatsApp æ¸¬è©¦
python -m pytest tests/unit/platforms/test_whatsapp_handler.py -v

# æª¢æŸ¥å¹³å°ç‹€æ…‹
curl http://your-domain.com/health | jq '.checks.platforms'

# æ¸¬è©¦ webhook é©—è­‰
curl -X GET "https://your-domain.com/webhooks/whatsapp?hub.mode=subscribe&hub.verify_token=your_verify_token&hub.challenge=test"
```

## ğŸŒŸ Messenger å¹³å°åŠŸèƒ½

### ğŸ“± Facebook Messenger Platform
Messenger å¹³å°ä½¿ç”¨ Meta å®˜æ–¹çš„ Messenger Platform APIï¼Œæä¾›ä¼æ¥­ç´šçš„èŠå¤©æ©Ÿå™¨äººæœå‹™ã€‚

#### æ”¯æ´åŠŸèƒ½
- âœ… **æ–‡å­—è¨Šæ¯**: å®Œæ•´çš„æ–‡å­—å…§å®¹æ¥æ”¶å’Œç™¼é€
- âœ… **éŸ³è¨Šè¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰å’Œè½‰éŒ„ç‚ºæ–‡å­—ï¼ˆå¦‚åŒ LINEï¼‰
- âœ… **åœ–ç‰‡è¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰åœ–ç‰‡æª”æ¡ˆ
- âœ… **å½±ç‰‡è¨Šæ¯**: æ”¯æ´å½±ç‰‡æª”æ¡ˆè™•ç†
- âœ… **ä½ç½®è¨Šæ¯**: ç¶“ç·¯åº¦åº§æ¨™å’Œåœ°å€è³‡è¨Š
- âœ… **å¿«é€Ÿå›è¦†**: äº’å‹•å¼å¿«é€Ÿå›è¦†æŒ‰éˆ•
- âœ… **ç°½åé©—è­‰**: HMAC-SHA1 webhook å®‰å…¨é©—è­‰

#### æŠ€è¡“ç‰¹è‰²
- **å®˜æ–¹ API**: ä½¿ç”¨ Meta å®˜æ–¹ Messenger Platform API
- **çµ±ä¸€ä»‹é¢**: èˆ‡å…¶ä»–å¹³å°ä½¿ç”¨ç›¸åŒçš„èŠå¤©æœå‹™
- **åª’é«”è™•ç†**: è‡ªå‹•åª’é«”æª”æ¡ˆä¸‹è¼‰å’Œè™•ç†
- **ç”¨æˆ¶è³‡è¨Š**: è‡ªå‹•ç²å–ç”¨æˆ¶å§“åå’Œè³‡æ–™
- **Echo éæ¿¾**: è‡ªå‹•éæ¿¾æ©Ÿå™¨äººè‡ªå·±ç™¼é€çš„è¨Šæ¯

#### ç”³è«‹è¦æ±‚
- Facebook é–‹ç™¼è€…å¸³è™Ÿ
- Facebook æ‡‰ç”¨ç¨‹å¼
- Facebook é é¢ï¼ˆä¼æ¥­é é¢ï¼‰
- Messenger Platform è¨­å®š

#### é™åˆ¶èªªæ˜
- **ç”¨æˆ¶ç™¼èµ·**: åªèƒ½å›è¦†ç”¨æˆ¶ä¸»å‹•ç™¼é€çš„è¨Šæ¯
- **24å°æ™‚çª—å£**: ä½¿ç”¨è€…äº’å‹•å¾Œ24å°æ™‚å…§å¯è‡ªç”±å›è¦†
- **é é¢ç¶å®š**: éœ€è¦ç¶å®šåˆ°ç‰¹å®š Facebook é é¢
- **å¯©æ ¸æµç¨‹**: æŸäº›åŠŸèƒ½éœ€è¦ Facebook å¯©æ ¸

### ğŸ”§ Messenger è¨­å®š
```yaml
platforms:
  messenger:
    enabled: true
    app_id: "${FACEBOOK_APP_ID}"
    app_secret: "${FACEBOOK_APP_SECRET}"
    page_access_token: "${FACEBOOK_PAGE_ACCESS_TOKEN}"
    verify_token: "${FACEBOOK_VERIFY_TOKEN}"
    api_version: "v19.0"
```

### ğŸ“ Webhook è¨­å®š
- **Webhook URL**: `https://your-domain.com/webhooks/messenger`
- **é©—è­‰æ–¹å¼**: GET è«‹æ±‚èˆ‡ verify_token é©—è­‰
- **æ¥æ”¶æ–¹å¼**: POST è«‹æ±‚åŒ…å«è¨Šæ¯è³‡æ–™
- **ç°½åé©—è­‰**: ä½¿ç”¨ App Secret é€²è¡Œ HMAC-SHA1 é©—è­‰

### ğŸ§ª æ¸¬è©¦å‘½ä»¤
```bash
# åŸ·è¡Œ Messenger æ¸¬è©¦
python -m pytest tests/unit/platforms/test_messenger_handler.py -v

# æª¢æŸ¥å¹³å°ç‹€æ…‹
curl http://your-domain.com/health | jq '.checks.platforms'

# æ¸¬è©¦ webhook é©—è­‰
curl -X GET "https://your-domain.com/webhooks/messenger?hub.mode=subscribe&hub.verify_token=your_verify_token&hub.challenge=test"
```

## ğŸŒŸ Instagram å¹³å°åŠŸèƒ½

### ğŸ“± Instagram Business Cloud API
Instagram å¹³å°ä½¿ç”¨ Meta å®˜æ–¹çš„ Instagram Business Cloud APIï¼Œæä¾›ä¼æ¥­ç´šçš„ç§è¨ŠèŠå¤©æ©Ÿå™¨äººæœå‹™ã€‚

#### æ”¯æ´åŠŸèƒ½
- âœ… **æ–‡å­—è¨Šæ¯**: å®Œæ•´çš„æ–‡å­—å…§å®¹æ¥æ”¶å’Œç™¼é€
- âœ… **éŸ³è¨Šè¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰å’Œè½‰éŒ„ç‚ºæ–‡å­—ï¼ˆå¦‚åŒ LINEï¼‰
- âœ… **åœ–ç‰‡è¨Šæ¯**: è‡ªå‹•ä¸‹è¼‰åœ–ç‰‡æª”æ¡ˆ
- âœ… **å½±ç‰‡è¨Šæ¯**: æ”¯æ´å½±ç‰‡æª”æ¡ˆè™•ç†
- âœ… **æª”æ¡ˆè¨Šæ¯**: æ”¯æ´å„ç¨®æª”æ¡ˆæ ¼å¼
- âœ… **Story å›è¦†**: å›è¦†ç”¨æˆ¶çš„ Story æåŠå’Œäº’å‹•
- âœ… **ç°½åé©—è­‰**: HMAC-SHA1 webhook å®‰å…¨é©—è­‰

#### æŠ€è¡“ç‰¹è‰²
- **å®˜æ–¹ API**: ä½¿ç”¨ Meta å®˜æ–¹ Instagram Business Cloud API
- **çµ±ä¸€ä»‹é¢**: èˆ‡å…¶ä»–å¹³å°ä½¿ç”¨ç›¸åŒçš„èŠå¤©æœå‹™
- **åª’é«”è™•ç†**: è‡ªå‹•åª’é«”æª”æ¡ˆä¸‹è¼‰å’Œè™•ç†
- **ç”¨æˆ¶è³‡è¨Š**: è‡ªå‹•ç²å–ç”¨æˆ¶åç¨±å’Œè³‡æ–™
- **Story äº’å‹•**: æ”¯æ´ Story æåŠå’Œå›è¦†åŠŸèƒ½

#### ç”³è«‹è¦æ±‚
- Facebook é–‹ç™¼è€…å¸³è™Ÿ
- Facebook æ‡‰ç”¨ç¨‹å¼
- Instagram å•†æ¥­å¸³è™Ÿï¼ˆBusiness Accountï¼‰
- å°‡ Instagram å¸³è™Ÿé€£æ¥åˆ° Facebook é é¢
- Instagram Basic Display æˆ– Business Discovery API æ¬Šé™

#### é™åˆ¶èªªæ˜
- **å•†æ¥­å¸³è™Ÿ**: åƒ…æ”¯æ´ Instagram å•†æ¥­å¸³è™Ÿ
- **ç”¨æˆ¶ç™¼èµ·**: åªèƒ½å›è¦†ç”¨æˆ¶ä¸»å‹•ç™¼é€çš„è¨Šæ¯
- **24å°æ™‚çª—å£**: ä½¿ç”¨è€…äº’å‹•å¾Œ24å°æ™‚å…§å¯è‡ªç”±å›è¦†
- **Story å›è¦†**: åƒ…èƒ½å›è¦†æåŠå•†æ¥­å¸³è™Ÿçš„ Story
- **é é¢ç¶å®š**: éœ€è¦å°‡ Instagram å¸³è™Ÿé€£æ¥åˆ° Facebook é é¢

### ğŸ”§ Instagram è¨­å®š
```yaml
platforms:
  instagram:
    enabled: true
    app_id: "${INSTAGRAM_APP_ID}"
    app_secret: "${INSTAGRAM_APP_SECRET}"
    page_access_token: "${INSTAGRAM_PAGE_ACCESS_TOKEN}"
    verify_token: "${INSTAGRAM_VERIFY_TOKEN}"
    api_version: "v19.0"
```

### ğŸ“ Webhook è¨­å®š
- **Webhook URL**: `https://your-domain.com/webhooks/instagram`
- **é©—è­‰æ–¹å¼**: GET è«‹æ±‚èˆ‡ verify_token é©—è­‰
- **æ¥æ”¶æ–¹å¼**: POST è«‹æ±‚åŒ…å«è¨Šæ¯è³‡æ–™
- **ç°½åé©—è­‰**: ä½¿ç”¨ App Secret é€²è¡Œ HMAC-SHA1 é©—è­‰

### ğŸ§ª æ¸¬è©¦å‘½ä»¤
```bash
# åŸ·è¡Œ Instagram æ¸¬è©¦
python -m pytest tests/unit/platforms/test_instagram_handler.py -v

# æª¢æŸ¥å¹³å°ç‹€æ…‹
curl http://your-domain.com/health | jq '.checks.platforms'

# æ¸¬è©¦ webhook é©—è­‰
curl -X GET "https://your-domain.com/webhooks/instagram?hub.mode=subscribe&hub.verify_token=your_verify_token&hub.challenge=test"
```

## ğŸ“ é …ç›®çµæ§‹

```
ChatGPT-Line-Bot/
â”œâ”€â”€ main.py                 # çµ±ä¸€å…¥å£é»ï¼ˆv2.0ï¼‰- è‡ªå‹•ç’°å¢ƒåµæ¸¬
â”œâ”€â”€ gunicorn.conf.py        # Gunicorn é…ç½®æ–‡ä»¶
â”œâ”€â”€ .env.local.example      # æœ¬åœ°é–‹ç™¼ç’°å¢ƒè®Šé‡æ¨¡æ¿
â”œâ”€â”€ scripts/                # å•Ÿå‹•è…³æœ¬
â”‚   â”œâ”€â”€ dev.sh             # é–‹ç™¼ç’°å¢ƒå•Ÿå‹•è…³æœ¬
â”‚   â”œâ”€â”€ prod.sh            # ç”Ÿç”¢ç’°å¢ƒå•Ÿå‹•è…³æœ¬
â”‚   â”œâ”€â”€ test-prod.sh       # æœ¬åœ°ç”Ÿç”¢æ¸¬è©¦è…³æœ¬
â”‚   â””â”€â”€ deploy/            # é›²ç«¯éƒ¨ç½²è…³æœ¬
â”‚       â”œâ”€â”€ deploy-to-cloudrun.sh
â”‚       â”œâ”€â”€ monitoring-setup.sh
â”‚       â””â”€â”€ setup-loadbalancer.sh
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yml.example # æ‡‰ç”¨é…ç½®æ¨¡æ¿
â”‚   â””â”€â”€ deploy/            # é›²ç«¯éƒ¨ç½²é…ç½®
â”‚       â”œâ”€â”€ .env.example   # é›²ç«¯éƒ¨ç½²ç’°å¢ƒè®Šé‡æ¨¡æ¿
â”‚       â”œâ”€â”€ Dockerfile.cloudrun
â”‚       â””â”€â”€ cloudrun-service.yaml
â””â”€â”€ docs/                   # æ–‡æª”
    â”œâ”€â”€ RUNNING.md         # é‹è¡ŒæŒ‡å—ï¼ˆæœ¬æ–‡ä»¶ï¼‰
    â”œâ”€â”€ DEPLOYMENT.md      # éƒ¨ç½²æŒ‡å—
    â””â”€â”€ ...
```

## ğŸ”§ ç’°å¢ƒé…ç½®

### æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

```bash
# 1. è¤‡è£½ç’°å¢ƒè®Šé‡æ¨¡æ¿
cp .env.local.example .env.local

# 2. ç·¨è¼¯é…ç½®æ–‡ä»¶
vim .env.local
```

### é›²ç«¯éƒ¨ç½²ç’°å¢ƒ

```bash
# 1. è¤‡è£½éƒ¨ç½²ç’°å¢ƒè®Šé‡æ¨¡æ¿
cp config/deploy/.env.example config/deploy/.env

# 2. ç·¨è¼¯éƒ¨ç½²é…ç½®æ–‡ä»¶
vim config/deploy/.env
```

## ğŸ¯ é‹è¡Œæ–¹å¼

### 1. é–‹ç™¼ç’°å¢ƒï¼ˆFlask é–‹ç™¼æœå‹™å™¨ï¼‰

**ä½¿ç”¨è…³æœ¬ï¼ˆæ¨è–¦ï¼‰:**
```bash
./scripts/dev.sh
```

**çµ±ä¸€å•Ÿå‹•æ–¹å¼ (v2.0):**
```bash
# è‡ªå‹•åµæ¸¬ç‚ºé–‹ç™¼ç’°å¢ƒ
python main.py

# æˆ–æ˜ç¢ºæŒ‡å®šé–‹ç™¼ç’°å¢ƒ
FLASK_ENV=development python main.py
```

**ç‰¹é»:**
- âœ… è‡ªå‹•é‡è¼‰ä»£ç¢¼è®Šæ›´
- âœ… è©³ç´°éŒ¯èª¤è¨Šæ¯
- âœ… èª¿è©¦æ¨¡å¼
- âš ï¸ åƒ…é©ç”¨æ–¼é–‹ç™¼ç’°å¢ƒ
- âŒ ä¸é©åˆç”Ÿç”¢ç’°å¢ƒ

### 2. æœ¬åœ°ç”Ÿç”¢æ¸¬è©¦

**ä½¿ç”¨è…³æœ¬ï¼ˆæ¨è–¦ï¼‰:**
```bash
./scripts/test-prod.sh
```

**çµ±ä¸€å•Ÿå‹•æ–¹å¼ (v2.0):**
```bash
# è‡ªå‹•å•Ÿå‹• Gunicorn è¼•é‡ç´šé…ç½®
FLASK_ENV=production python main.py

# å‘å¾Œå…¼å®¹æ–¹å¼
gunicorn -c gunicorn.conf.py main:application
```

**ç‰¹é»:**
- âœ… ä½¿ç”¨ Gunicorn WSGI æœå‹™å™¨
- âœ… ç”Ÿç”¢ç´šé…ç½®ä½†è¼ƒè¼•é‡
- âœ… é©åˆæœ¬åœ°æ¸¬è©¦ç”Ÿç”¢é…ç½®
- âœ… å–®å€‹ worker ç¯€çœè³‡æº

### 3. ç”Ÿç”¢ç’°å¢ƒ

**ä½¿ç”¨è…³æœ¬:**
```bash
./scripts/prod.sh
```

**çµ±ä¸€å•Ÿå‹•æ–¹å¼ (v2.0):**
```bash
# è‡ªå‹•å•Ÿå‹• Gunicorn å®Œæ•´é…ç½®
FLASK_ENV=production python main.py

# å‘å¾Œå…¼å®¹æ–¹å¼
gunicorn -c gunicorn.conf.py main:application
```

**Docker é‹è¡Œ:**
```bash
docker build -t chatgpt-line-bot .
docker run -p 8080:8080 chatgpt-line-bot
```

**ç‰¹é»:**
- âœ… é«˜æ€§èƒ½ Gunicorn + Gevent
- âœ… å¤š worker ä¸¦ç™¼è™•ç†
- âœ… ç”Ÿç”¢ç´šå®‰å…¨é…ç½®
- âœ… å®Œæ•´æ—¥èªŒè¨˜éŒ„
- âœ… è‡ªå‹•é‡å•Ÿæ©Ÿåˆ¶

### 4. é›²ç«¯éƒ¨ç½²ï¼ˆGoogle Cloud Runï¼‰

```bash
# è‡ªå‹•éƒ¨ç½²åˆ° Cloud Run
./scripts/deploy/deploy-to-cloudrun.sh

# æª¢æŸ¥é…ç½®ï¼ˆä¹¾é‹è¡Œï¼‰
./scripts/deploy/deploy-to-cloudrun.sh --dry-run

# è‡ªå‹•æ¨¡å¼éƒ¨ç½²
./scripts/deploy/deploy-to-cloudrun.sh --auto
```

**ç‰¹é»:**
- âœ… å®Œå…¨ç®¡ç†çš„æœå‹™
- âœ… è‡ªå‹•æ“´ç¸®å®¹
- âœ… SSL çµ‚æ­¢
- âœ… å…¨çƒè² è¼‰å¹³è¡¡
- âœ… ç›£æ§å’Œæ—¥èªŒ

## âš ï¸ é‡è¦æé†’

### Flask é–‹ç™¼æœå‹™å™¨è­¦å‘Š

ç•¶æ‚¨çœ‹åˆ°ä»¥ä¸‹è­¦å‘Šæ™‚ï¼š

```
WARNING: This is a development server. Do not use it in a production deployment. 
Use a production WSGI server instead.
```

**åŸå› :** æ‚¨æ­£åœ¨ä½¿ç”¨ Flask å…§å»ºçš„é–‹ç™¼æœå‹™å™¨

**è§£æ±ºæ–¹æ¡ˆ:**
- **é–‹ç™¼ç’°å¢ƒ:** é€™æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥å¿½ç•¥
- **ç”Ÿç”¢ç’°å¢ƒ:** ä½¿ç”¨ `./scripts/prod.sh` æˆ– `gunicorn` å‘½ä»¤

### ç’°å¢ƒåˆ†é›¢æœ€ä½³å¯¦è¸

| ç’°å¢ƒ | å•Ÿå‹•æ–¹å¼ | é…ç½®æ–‡ä»¶ | é©ç”¨å ´æ™¯ |
|------|----------|----------|----------|
| é–‹ç™¼ | `./scripts/dev.sh` | `.env.local` | æ—¥å¸¸é–‹ç™¼ã€èª¿è©¦ |
| æœ¬åœ°æ¸¬è©¦ | `./scripts/test-prod.sh` | `.env.local` | æ¸¬è©¦ç”Ÿç”¢é…ç½® |
| ç”Ÿç”¢ | `./scripts/prod.sh` | ç’°å¢ƒè®Šé‡ | æœ¬åœ°ç”Ÿç”¢éƒ¨ç½² |
| é›²ç«¯ | `./scripts/deploy/deploy-to-cloudrun.sh` | `config/deploy/.env` | Google Cloud Run |

## ğŸ” æ•…éšœæ’é™¤

### 1. ç«¯å£è¢«ä½”ç”¨

```bash
# æŸ¥æ‰¾ä½”ç”¨ç«¯å£çš„é€²ç¨‹
lsof -i :8080

# çµ‚æ­¢é€²ç¨‹
kill -9 [PID]
```

### 2. ç’°å¢ƒè®Šé‡æœªè¼‰å…¥

```bash
# æª¢æŸ¥æ˜¯å¦æœ‰ .env.local æ–‡ä»¶
ls -la .env.local

# æ‰‹å‹•è¼‰å…¥ç’°å¢ƒè®Šé‡
source .env.local
```

### 3. Gunicorn æœªå®‰è£

```bash
# å®‰è£ Gunicorn
pip install gunicorn gevent

# æˆ–ä½¿ç”¨ requirements.txt
pip install -r requirements.txt
```

### 4. æ¬Šé™å•é¡Œ

```bash
# ç¢ºä¿è…³æœ¬å¯åŸ·è¡Œ
chmod +x scripts/*.sh

# æª¢æŸ¥æ–‡ä»¶æ¬Šé™
ls -la scripts/
```

## ğŸ”’ å®‰å…¨é…ç½®

### ç”Ÿç”¢ç’°å¢ƒå¿…é ˆè¨­ç½®

- `LINE_CHANNEL_ACCESS_TOKEN`
- `LINE_CHANNEL_SECRET`
- `OPENAI_API_KEY`
- `DB_PASSWORD`
- `TEST_SECRET_KEY`

### é–‹ç™¼ç’°å¢ƒæ³¨æ„äº‹é …

- ä¸è¦åœ¨é–‹ç™¼ç’°å¢ƒä½¿ç”¨ç”Ÿç”¢å¯†é‘°
- `.env.local` æ–‡ä»¶å·²åŠ å…¥ `.gitignore`
- å®šæœŸè¼ªæ›¿é–‹ç™¼ç’°å¢ƒçš„æ¸¬è©¦å¯†é‘°

## ğŸ“š ç›¸é—œæ–‡æª”

- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)
- [å®‰å…¨æ”¿ç­–](docs/SECURITY.md)
- [æ¶æ§‹èªªæ˜](docs/RAG_IMPLEMENTATION.md)
- [Cloud Run éƒ¨ç½²](docs/DEPLOYMENT.md)

## ğŸ†˜ ç²å–å¹«åŠ©

å¦‚æœé‡åˆ°å•é¡Œï¼š

1. æª¢æŸ¥æ—¥èªŒæ–‡ä»¶ `logs/app.log`
2. ç¢ºèªç’°å¢ƒè®Šé‡è¨­ç½®
3. é©—è­‰ç¶²è·¯é€£æ¥å’Œ API å¯†é‘°
4. æŸ¥çœ‹ç›¸é—œæ–‡æª”
5. æäº¤ Issue åˆ°é …ç›®å€‰åº«